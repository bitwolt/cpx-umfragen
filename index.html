<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VerfÃ¼gbare Umfragen</title>
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background-color: #111;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 40px 20px;
    }
    h1 {
      color: #00c2ff;
      font-size: 2rem;
      margin-bottom: 10px;
    }
    #count_surveys {
      font-size: 1.2rem;
      margin-bottom: 20px;
      color: yellow;
      text-decoration: underline;
      cursor: pointer;
    }
    #script {
      width: 100%;
      max-width: 800px;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ¯ VerfÃ¼gbare Umfragen</h1>
  <a href="#" onclick="loadIFrame();"><div id="count_surveys">Lade Umfragen...</div></a>
  <div id="script"></div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const userId = urlParams.get('id') || 'guest';

    const script1 = {
      div_id: "script",
      theme_style: 5,
      order_by: 1,
      limit_surveys: 8,
      display_mode: 3
    };

    const config = {
      general_config: {
        app_id: 28226,
        ext_user_id: userId,
        subid_1: "",
        subid_2: ""
      },
      style_config: {
        text_color: "#2b2b2b",
        survey_box: {
          topbar_background_color: "#1DA05E",
          box_background_color: "white",
          rounded_borders: false,
          stars_filled: "#ffaf20",
          stars_empty: "rgb(221 221 221)",
          accent_color_small_box: "#1DA05E",
          place_stars_bottom_small_box: true
        }
      },
      script_config: [script1],
      debug: false,
      useIFrame: true,
      iFramePosition: 3,
      functions: {
        no_surveys_available: () => {
          document.getElementById("count_surveys").innerHTML = '0 Umfragen verfÃ¼gbar';
        },
        count_new_surveys: (count) => {
          document.getElementById("count_surveys").innerHTML = count + ' Umfragen verfÃ¼gbar';
        },
        get_all_surveys: (surveys) => {
          console.log("Alle Umfragen:", surveys);
        },
        get_transaction: (transactions) => {
          console.log("Transaktionen:", transactions);
        }
      }
    };

    window.config = config;

    function loadIFrame(surveyId) {
      window.dispatchEvent(new CustomEvent("triggerFrame", { detail: { surveyId: surveyId } }));
    }
  </script>
  <script type="text/javascript" src="https://cdn.cpx-research.com/assets/js/script_tag_v2.0.js"></script>
</body>
</html>
